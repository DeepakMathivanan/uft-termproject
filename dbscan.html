<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DBSCAN Clustering</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="container">
    <h1>DBSCAN Clustering</h1>
    <p>This section breaks down how KMeans was applied to customer segmentation. Below you'll find tiles for code snippets, charts, and tabular data.</p>
      <p>
        You can find the code in this link: 
        <a href="https://colab.research.google.com/drive/1SdjPHddKyfSKz41rIgDQqm8Nkj6kC-15#scrollTo=uTMEIxIutsfZ" target="_blank" style="color: #1a73e8; text-decoration: underline;">
          Colab Notebook
        </a>
    </p>
    <div class="tile-container">
      <!-- Data Source -->
        <div class="explanation">
          <p>
            <strong> Data Source </strong>The dataset containing online retail transactions from 2009 to 2011. It includes customer purchases, product details, invoice dates, quantities, and pricing information.
          </p>
        </div>

      <!-- Image Tile 1 -->
      <div  class="tile">
        <h2>Glimpse of data</h2>
        <img src="assets/glimpse-of-data.png" alt="glimpse of data" class="tile-image" />
      </div>

      <!-- Data Cleaning -->
        <div class="explanation">
          <p>
            <strong> Data Cleaning </strong> We cleaned the data by removing missing entries, dropping invalid records like negative quantities, and ensuring proper data types for dates and numerical columns. This helped maintain data integrity for accurate analysis.
          </p>
        </div>

    <!-- Data Preprocessing -->
          <div class="explanation">
            <p>
              <strong> Data Preprocessing </strong> We engineered new features like Total sales, Hour, DayOfWeek, Month and Year are created from existing columns. We also created an RFM (Recency, Frequency, Monetary) table and applied scaling to prepare the data for clustering models like KMeans and DBSCAN.
            </p>
          </div>

    <!-- Image Tile 2 -->
      <div  class="tile">
        <h2>Transaction by country</h2>
        <img src="assets/1-db-transactionbycountry.png" alt="Transaction by country" class="tile-image" />
      </div>

       <!-- Image Tile 3 -->
      <div  class="tile">
        <h2>Top 10 customers</h2>
        <img src="assets/2-db-top10customers.png" alt="Top 10 customers" class="tile-image" />
      </div>

      <!-- Image Tile 4 -->
      <div  class="tile">
        <div class="tile-content">
          <p> Removed outlier using IQR(Interquartile range). It is a measure of statistical dispersion, describing the spread of the middle 50% of a dataset. It's calculated as the difference between the third quartile(Q3) which is the upper bound and the first quartile(Q1) which is the lower bound of the data. Data points that fall outside these bounds (either above the upper bound or below the lower bound) are considered potential outliers.</p>
        </div>
        <pre><code> 
          #Apply IQR After Aggregating by Customer
          # Step 1: Aggregate total spending per customer
          customer_spending = df_clean.groupby('Customer ID')['TotalPrice'].sum()
          
          # Step 2: Apply IQR to the aggregated totals
          Q1 = customer_spending.quantile(0.25)
          Q3 = customer_spending.quantile(0.75)
          IQR = Q3 - Q1
          
          lower_bound = Q1 - 1.5 * IQR
          upper_bound = Q3 + 1.5 * IQR
          
          # Step 3: Filter out customers with extreme total spend
          customer_spending_clean = customer_spending[(customer_spending >= lower_bound) & (customer_spending <= upper_bound)]
        </code></pre>
        <h2>Top 10 customers(Removed Outliers)</h2>
        <img src="assets/3-db-top10customers-removedoutliers.png" alt="Top 10 customers with removed outliers" class="tile-image" />
      </div>

       <!-- Image Tile 5 -->
      <div  class="tile">
        <h2>Null Check</h2>
        <img src="assets/4-db-nullchecking-removedoutliers.png" alt="Null check" class="tile-image" />
      </div>
      
      <!-- Image Tile 6 -->
      <div  class="tile">
        <h2>RFM Score</h2>
        <div class="tile-content">
          <p> The purpose of the RFM score is to segment customers based on their Recency (how recently they purchased), Frequency (how often they purchase), and Monetary (how much they spend). It helps businesses identify and prioritize key customer groups like loyal buyers, at-risk customers, or high spenders for targeted marketing and engagement strategies.</p>
        </div>
        <pre><code> 
          from matplotlib import pyplot as plt
          top_10_scores['RFM_Score'].plot(kind='line', figsize=(8, 4), title='RFM_Score')
          plt.gca().spines[['top', 'right']].set_visible(False)
        </code></pre>
        <img src="assets/rfmscore-linechart.png" alt="Sales metrics by country" class="tile-image" />
      </div>

      
    </div>
  </div>
</body>
</html>
